(this.webpackJsonpgalaxy=this.webpackJsonpgalaxy||[]).push([[0],{28:function(e,a,t){e.exports=t(40)},29:function(e,a,t){},40:function(e,a,t){"use strict";t.r(a);t(29);var n=t(0),c=t.n(n),r=t(22),l=t.n(r),s=t(9),i=t(1),o=function(e){var a=e.nav;return c.a.createElement("nav",{className:"nav"},c.a.createElement("ul",{className:"nav__list"},a.map((function(e,a){return c.a.createElement("li",{key:a,className:"nav__item"},c.a.createElement(s.b,{className:"nav__link",to:"/".concat(e.link)},c.a.createElement("div",{className:"nav__link-icon"}),c.a.createElement("span",{className:"nav__link-txt"},e.name)))}))))};o.defaultProps={nav:[{name:"\u0433\u043b\u0430\u0432\u043d\u0430\u044f",icon:"main",link:""},{name:"\u0441\u043f\u0438\u0441\u043e\u043a \u043c\u0435\u0441\u0442",icon:"places",link:"places"}]};var m=function(e){return c.a.createElement(s.b,{className:"logo",to:"/"},"Logo")},u=function(e){return c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"sidebar__inner"},c.a.createElement(m,null),c.a.createElement(o,null)))},p=t(16),f=t(11),d=t(2),v=t.n(d),_=t(7),E=t(4),b=function(){var e=Object(n.useState)(!1),a=Object(E.a)(e,2),t=a[0],c=a[1],r=Object(n.useState)(null),l=Object(E.a)(r,2),s=l[0],i=l[1];return{loading:t,request:Object(n.useCallback)(function(){var e=Object(_.a)(v.a.mark((function e(a){var t,n,r,l,s,o=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:"GET",n=o.length>2&&void 0!==o[2]?o[2]:null,r=o.length>3&&void 0!==o[3]?o[3]:{},c(!0),e.prev=4,n&&(n=JSON.stringify(n),r["Content-Type"]="application/json"),e.next=8,fetch(a,{method:t,body:n,headers:r});case 8:return l=e.sent,e.next=11,l.json();case 11:if(s=e.sent,l.ok){e.next=14;break}throw new Error(s.message||"\u043e\u0448\u0438\u0431\u043a\u0430");case 14:return e.abrupt("return",s);case 17:throw e.prev=17,e.t0=e.catch(4),c(!1),i(e.t0.message),e.t0;case 22:c(!1);case 23:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(a){return e.apply(this,arguments)}}(),[]),error:s,clearError:function(){return i(null)}}},N=function(e){var a,t=e.url,r=e.place,l=(e.deletePlaceFromBd,Object(n.useState)(!1)),i=Object(E.a)(l,2),o=i[0],m=i[1],u=Object(n.useState)(),p=Object(E.a)(u,2),f=p[0],d=p[1],N=b(),j=(N.loading,N.error,N.request),O=function(){var e=Object(_.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("/api/weather");case 2:a=e.sent,d(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o||(m(!0),O())}),[o,f]),c.a.createElement(c.a.Fragment,null,c.a.createElement(s.b,{className:"card place",to:"".concat(t,"/").concat(r._id)},c.a.createElement("div",{className:"place__header"},c.a.createElement("div",{className:"place__title"},c.a.createElement("div",{className:"place__temp"},f),c.a.createElement("div",{className:"place__title-inner"},c.a.createElement("span",null,r.title),c.a.createElement("p",null,r.country||"country"," -- ",r.city||"city")))),c.a.createElement("div",{className:"place__tags"},null===(a=r.tags)||void 0===a?void 0:a.map((function(e,a){return c.a.createElement("span",{className:"place__tags-item",key:a},e)}))),c.a.createElement("div",{className:"place__content"},c.a.createElement("div",{className:"place__inner"},c.a.createElement("div",{className:"place__data"},r.description&&c.a.createElement("div",{className:"place__description"},c.a.createElement("p",null,r.description)))))))},j=t(24),O=t(25),h=t(27),g=t(26),y=function(e){Object(h.a)(t,e);var a=Object(g.a)(t);function t(){return Object(j.a)(this,t),a.apply(this,arguments)}return Object(O.a)(t,[{key:"render",value:function(){var e=this.props.value;return c.a.createElement("div",{className:"loading"},c.a.createElement("span",{className:"loading__value"},"Loading ",e,"..."))}}]),t}(c.a.Component),k=t(15),x=function(e){return c.a.createElement("button",{className:"btn",onClick:e.onClick,type:e.type||"text"},e.text)},w=function(e){var a=Object(n.useState)({}),t=Object(E.a)(a,2),r=t[0],l=t[1],s=Object(n.useRef)(null),i=Object(n.useState)([]),o=Object(E.a)(i,2),m=o[0],u=o[1],d=function(){var a=Object(_.a)(v.a.mark((function a(){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.createPlace(r,m);case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),b=function(e){l(Object(f.a)(Object(f.a)({},r),{},Object(k.a)({},e.target.name,e.target.value)))};return Object(n.useEffect)((function(){console.log(m)}),[m]),c.a.createElement("div",{className:"modal"},c.a.createElement("div",{className:"modal__inner"},c.a.createElement("div",{className:"modal__header"},c.a.createElement("h2",{className:"modal__title"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"),c.a.createElement("div",{className:"modal__close",onClick:e.showForm})),c.a.createElement("div",{className:"modal__content"},c.a.createElement("div",{className:"form"},c.a.createElement("div",{className:"form__content"},c.a.createElement("div",{className:"form__part"},c.a.createElement("div",{className:"form__row"},c.a.createElement("label",{className:"form__label"},c.a.createElement("span",{className:"form__label-title"},"title"),c.a.createElement("input",{className:"form__input",type:"text",name:"title",onChange:b})),c.a.createElement("label",{className:"form__label"},c.a.createElement("span",{className:"form__label-title"},"country"),c.a.createElement("input",{className:"form__input",type:"text",name:"country",onChange:b})),c.a.createElement("label",{className:"form__label"},c.a.createElement("span",{className:"form__label-title"},"city"),c.a.createElement("input",{className:"form__input",type:"text",name:"city",onChange:b})))),c.a.createElement("div",{className:"form__part"},c.a.createElement("div",{className:"form__row"},c.a.createElement("label",{className:"form__label"},c.a.createElement("span",{className:"form__label-title"},"description"),c.a.createElement("textarea",{className:"form__textarea",name:"description",onChange:b})))),c.a.createElement("div",{className:"form__part"},c.a.createElement("div",{className:"form__row"},m.map((function(e,a){return c.a.createElement("div",{key:a},e)})),c.a.createElement("input",{type:"text",name:"tag",ref:s}),c.a.createElement("button",{onClick:function(){var e;if(null===(e=s.current)||void 0===e?void 0:e.value){var a=s.current.value;u((function(e){return[].concat(Object(p.a)(e),[a])})),s.current.value=""}}},"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u044d\u0433")))),c.a.createElement("div",{className:"form__footer"},c.a.createElement(x,{onClick:d,type:"submit",text:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}))))))},C=function(e){var a=Object(n.useState)(!1),t=Object(E.a)(a,2),r=t[0],l=t[1],s=Object(n.useState)([]),o=Object(E.a)(s,2),m=o[0],u=o[1],d=Object(n.useState)(!1),j=Object(E.a)(d,2),O=j[0],h=j[1],g=Object(i.i)().url,k=Object(i.g)().search,x=b(),C=(x.loading,x.error,x.request);Object(n.useEffect)((function(){r||F()}),[r,m]);var S=function(){var e=Object(_.a)(v.a.mark((function e(a,t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),u((function(e){return e.filter((function(e){return e._id!==t}))})),e.next=4,C("".concat("/api/places","/delete"),"DELETE",{id:t});case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),P=function(){var e=Object(_.a)(v.a.mark((function e(a,t){var n,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.a)(Object(f.a)({},a),{},{tags:t}),console.log("dataPlace",n),e.prev=2,e.next=5,C("".concat("/api/places","/add"),"POST",n);case 5:c=e.sent,console.log("data.place",c.place),u((function(e){return[].concat(Object(p.a)(e),[c.place])})),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(a,t){return e.apply(this,arguments)}}(),F=function(){var e=Object(_.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,C("".concat("/api/places").concat(k&&k));case 3:a=e.sent,u(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){h(!O),document.body.classList.toggle("fixed")};return r?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"places grid"},m.length>0&&m.map((function(e,a){return c.a.createElement("div",{key:a,className:"grid__item"},c.a.createElement(N,{place:e,url:g,deletePlaceFromBd:S}))})),c.a.createElement("div",{className:"grid__item places__add"},c.a.createElement("div",{className:"places__add-inner",onClick:L},"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"))),O&&c.a.createElement(w,{createPlace:P,showForm:L})):c.a.createElement(y,{value:"places"})},S=function(){var e=Object(n.useState)(),a=Object(E.a)(e,2),t=a[0],r=a[1],l=Object(i.h)().placeId;console.log(l);var o=function(){var e=Object(_.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/places/".concat(l)).then((function(e){return e.json()})).then((function(e){r(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o()}),[]),t?c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("img",{src:t.img,alt:""})),c.a.createElement(s.b,{to:"/places"},"\u043d\u0430\u0437\u0430\u0434")):c.a.createElement("div",null,"Load...")},P=function(e){return c.a.createElement("div",{className:"app__inner"},c.a.createElement(s.a,null,c.a.createElement(u,null),c.a.createElement("main",{className:"main"},c.a.createElement("div",{className:"main__inner"},c.a.createElement(i.d,null,e.pages.map((function(e,a){return c.a.createElement(i.b,{exact:!0,path:"/".concat(e.router),key:a},e.content)})))))))};P.defaultProps={pages:[{router:"",title:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 \u0433\u0430\u043b\u0430\u043a\u0442\u0438\u043a\u0443",content:c.a.createElement(i.a,{to:"/places"})},{router:"places",title:"\u041c\u0435\u0441\u0442\u0430",content:c.a.createElement(C,null)},{router:"places/:placeId",title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430",content:c.a.createElement(S,null)}]},l.a.render(c.a.createElement(P,null),document.getElementById("app"))}},[[28,1,2]]]);
//# sourceMappingURL=main.70e800f9.chunk.js.map